"use strict";function getParameterByName(e){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location.href;e=e.replace(/[\[\]]/g,"\\$&");a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(a);return a&&a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):""}function capitalizeFirstLetter(e){return(e.charAt(0).toUpperCase()+e.slice(1)).replace("_"," ")}function queryAll(){return"?showItems="+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"")+"&page="+(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"")+"&color="+(2<arguments.length&&void 0!==arguments[2]?arguments[2]:"")+"&type="+(3<arguments.length&&void 0!==arguments[3]?arguments[3]:"")+"&rating="+(4<arguments.length&&void 0!==arguments[4]?arguments[4]:"")+"&price="+(5<arguments.length&&void 0!==arguments[5]?arguments[5]:"")+"&sort="+(6<arguments.length&&void 0!==arguments[6]?arguments[6]:"")}function jsonLoad(e,a,t){var r=null;try{r=new XMLHttpRequest}catch(e){try{r=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){r=new ActiveXObject("Microsoft.XMLHTTP")}}r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(200===r.status?a&&a(JSON.parse(r.responseText)):t&&t(r))},r.open("GET",e,!0),r.send()}function ___buildcustomColors(e){for(var a in e.MEYER_APP_COLOR)Object.hasOwnProperty.call(e.MEYER_APP_COLOR,a)&&$("#customColors").append('<div class="form-check" style="background:'+e.MEYER_APP_COLOR[a].hex_value+'"><input class="form-check-input" id="inlineCheckbox_'+e.MEYER_APP_COLOR[a].colour_name+'" type="checkbox" value="'+e.MEYER_APP_COLOR[a].colour_name+'"><label class="form-check-label" for="inlineCheckbox_'+e.MEYER_APP_COLOR[a].colour_name+'">'+capitalizeFirstLetter(e.MEYER_APP_COLOR[a].colour_name)+"</label></div>");if($("#customColors").on("change",function(){window.location.href=queryAll(getParameterByName("showItems"),getParameterByName("page"),$("#customColors input:checked").map(function(){return $(this).val()}).get().join(","),getParameterByName("type"),getParameterByName("rating"),getParameterByName("price"),getParameterByName("sort"))}),getParameterByName("color")){var t,r=getParameterByName("color").split(",");for(t in r)Object.hasOwnProperty.call(r,t)&&$('#customColors input[value="'+r[t]+'"]').prop("checked",!0)}$("#customColors .form-check-input").each(function(){$(this).prop("checked")&&$(this).parent().addClass("active")})}function ___buildItems(t){var e=Math.floor(t.rating),r="",a="",o="";if(0<e){for(var i=0;i<e;i++)o+='<i class="fas fa-star"></i>';if(e<5)for(var n=0;n<5-e;n++)a+='<i class="far fa-star deactive"></i>';r=o+a+' <span class="text-muted">('+t.rating+"/5)</span>"}else{for(var c=0;c<5;c++)a+='<i class="far fa-star deactive"></i>';r=a}$("#items").append('<div class="col-sm-6 col-md-4 item" id="item-'+t.id+'"> <div class="product-item"><img src="'+t.api_featured_image+'"> <h5 class="my-2">'+t.name+'</h5> <p class="rating" data-rating="'+t.rating+'">'+r+'</p> <p class="brand">'+t.brand+'</p> <p class="price">$'+t.price+'</p> <p class="more"> <a class="btn btn-sm" href="javascript:void(0);" data-toggle="modal" data-target="#staticBackdrop" data-id="'+t.id+'">View More</a></p> </div> </div>'),$('[data-id="'+t.id+'"]').on("click",function(){var e,a="";for(e in t.product_colors)Object.hasOwnProperty.call(t.product_colors,e)&&(a+='<li class="list-inline-item" style="background:'+t.product_colors[e].hex_value+'">&nbsp;</li>');$("#staticBackdrop .modal-title").text(t.name),$("#staticBackdrop .modal-body").html('<div class="row item"> <div class="col-lg-4"><img class="w-100" src="'+t.api_featured_image+'"></div> <div class="col-lg-8"> <div class="product-item"> <h3>'+t.name+'</h3> <p class="price mb-1">$'+t.price+'</p> <p class="rating"  data-rating="'+t.rating+'">'+r+'</p> <ul class="colors list-inline">'+a+'</ul> <p class="desc">'+t.description+'</p> <p class="more"><a class="btn btn-primary" href="'+t.product_link+'" target="_blank">View More <i class="fas fa-external-link-alt"></i></a></p> </div> </div> </div>')})}function ___buildItemsEmpty(e){$("#items").append('<div class="col-sm-12"><div class="alert alert-danger mb-4"><h4 class="alert-heading">Not found!</h4> <p>No items found in store</p></div></div>')}function ___buildPaging(e,a,t){for(var r=0<Math.floor(a/e)?Math.floor(a/e):1,o=0;o<r;o++)parseInt(getParameterByName("page"))==o+1||isNaN(parseInt(getParameterByName("page")))&&0==o?$("#paging").append('<li class="page-item active"><a class="page-link" href="?showItems='+e+"&page="+(o+1)+t.MEYER_CURRENT_QUERY+"&sort="+getParameterByName("sort")+'">'+(o+1)+"</a></li>"):$("#paging").append('<li class="page-item"><a class="page-link" href="?showItems='+e+"&page="+(o+1)+t.MEYER_CURRENT_QUERY+"&sort="+getParameterByName("sort")+'">'+(o+1)+"</a></li>")}function ___buildcustomPrice(e){$("#customPrice").attr("min",e.MEYER_APP_PRICE_RANGE[0]).attr("max",e.MEYER_APP_PRICE_RANGE[1]),$("#customPrice").on("change",function(){window.location.href=queryAll(getParameterByName("showItems"),getParameterByName("page"),getParameterByName("color"),getParameterByName("type"),getParameterByName("rating"),$("#customPrice").val(),getParameterByName("sort"))}),getParameterByName("price")?$("#customPrice").val(getParameterByName("price")):$("#customPrice").val(e.MEYER_APP_PRICE_RANGE[1]),$("#customPrice").removeClass("d-none")}function ___buildcustomRating(){for(var e=0;e<5;e++){for(var a="",t=0;t<5-e;t++)a+='<i class="fas fa-star text-warning"></i>';$("#customRating").append('<div class="form-check"><input class="form-check-input" id="inlineRadiobox_'+(5-e)+'" type="radio" value="'+(5-e)+'" name="inlineRadioOptions" ><label class="form-check-label" for="inlineRadiobox_'+(5-e)+'">'+a+"</label></div>")}$("#customRating").on("change",function(){window.location.href=queryAll(getParameterByName("showItems"),getParameterByName("page"),getParameterByName("color"),getParameterByName("type"),$("#customRating input:checked").val(),getParameterByName("price"),getParameterByName("sort"))}),getParameterByName("rating")&&$('#customRating input[value="'+getParameterByName("rating")+'"]').prop("checked",!0)}function ___buildShowItem(e){for(var a in e.MEYER_APP_PAGE)Object.hasOwnProperty.call(e.MEYER_APP_PAGE,a)&&$("#showItems").append('<option value="'+e.MEYER_APP_PAGE[a]+'">'+e.MEYER_APP_PAGE[a]+"</option>");$("#showItems").on("change",function(){window.location.href=queryAll(parseInt($("#showItems").val()),1,getParameterByName("color"),getParameterByName("type"),getParameterByName("rating"),getParameterByName("price"),getParameterByName("sort"))}),getParameterByName("showItems")&&$('#showItems option[value="'+getParameterByName("showItems")+'"]').prop("selected",!0)}function ___buildSortItem(e){var a=getParameterByName("page")?getParameterByName("page"):1,t=getParameterByName("sort")&&"asc"!==getParameterByName("sort")&&""!==getParameterByName("sort")?"asc":"desc",r="",r="desc"==t?'<i class="fas fa-sort-amount-down-alt"></i>':'<i class="fas fa-sort-amount-up-alt"></i>';$("#sortItems").append('<a class="btn btn-light border" href="?showItems='+getParameterByName("showItems")+"&page="+a+e.MEYER_CURRENT_QUERY+"&sort="+t+'"> '+r+"</a>")}function ___buildcustomType(e){for(var a in e.MEYER_APP_TYPE)Object.hasOwnProperty.call(e.MEYER_APP_TYPE,a)&&$("#customType").append('<div class="form-check"><input class="form-check-input" id="inlineCheckbox_'+e.MEYER_APP_TYPE[a]+'" type="checkbox" value="'+e.MEYER_APP_TYPE[a]+'"><label class="form-check-label" for="inlineCheckbox_'+e.MEYER_APP_TYPE[a]+'">'+capitalizeFirstLetter(e.MEYER_APP_TYPE[a])+"</label></div>");if($("#customType").on("change",function(){window.location.href=queryAll(getParameterByName("showItems"),getParameterByName("page"),getParameterByName("color"),$("#customType input:checked").map(function(){return $(this).val()}).get().join(","),getParameterByName("rating"),getParameterByName("price"),getParameterByName("sort"))}),getParameterByName("type")){var t,r=getParameterByName("type").split(",");for(t in r)Object.hasOwnProperty.call(r,t)&&$('#customType input[value="'+r[t]+'"]').prop("checked",!0)}}function ___filterData(o,e){getParameterByName("type")&&function(){var e,t=getParameterByName("type").split(","),r=[];for(e in t)!function(a){var e;Object.hasOwnProperty.call(t,a)&&(e=o.filter(function(e){return e.product_type.includes(t[a])}),r=r.concat(e))}(e);o=r}(),getParameterByName("color")&&function(){var e,t=getParameterByName("color").split(","),r=[];for(e in t)!function(a){var e;Object.hasOwnProperty.call(t,a)&&(e=o.filter(function(e){return e.product_colors.some(function(e){return e.colour_name===t[a]+" "||e.colour_name===t[a]})}),r=r.concat(e))}(e);o=r}(),getParameterByName("price")&&(o=o.filter(function(e){return parseInt(e.price)<=parseInt(getParameterByName("price"))})),getParameterByName("rating")&&(o=o.filter(function(e){return e.rating>=parseInt(getParameterByName("rating"))&&e.rating<parseInt(getParameterByName("rating"))+1})),getParameterByName("sort")&&"desc"===getParameterByName("sort")?o.sort(function(e,a){return parseInt(a.price)-parseInt(e.price)}):getParameterByName("sort")&&"asc"===getParameterByName("sort")&&o.sort(function(e,a){return parseInt(e.price)-parseInt(a.price)}),o.length<=0?___buildItemsEmpty():($(".itemsall").text(o.length),console.log("Start build items"),console.log(o),console.log("End build items")),parseInt(getParameterByName("page"))?$.each(o.slice((parseInt(getParameterByName("page"))-1)*e.MEYER_DEFAULT_PAGE,(parseInt(getParameterByName("page"))-1)*e.MEYER_DEFAULT_PAGE+e.MEYER_DEFAULT_PAGE),function(e,a){___buildItems(a)}):$.each(o.slice(0,e.MEYER_DEFAULT_PAGE),function(e,a){___buildItems(a)}),e.buildPaging(e.MEYER_DEFAULT_PAGE,o.length),$(".loading").hide()}var MEYER_APP={MEYER_REST_API:"https://makeup-api.herokuapp.com/api/v1/products.json?brand=maybelline",MEYER_DEFAULT_PAGE:parseInt(getParameterByName("showItems"))?parseInt(getParameterByName("showItems")):6,MEYER_CURRENT_QUERY:"&color="+getParameterByName("color")+"&type="+getParameterByName("type")+"&rating="+getParameterByName("rating")+"&price="+getParameterByName("price"),MEYER_APP_PAGE:[9,12,15],MEYER_APP_PRICE_RANGE:[0,20],MEYER_APP_TYPE:["bronzer","blush","lip_liner","foundation","eyeshadow","eyeliner","nail_polish","lipstick","mascara"],MEYER_APP_COLOR:[{hex_value:"#D39D7B",colour_name:"Caramel"},{hex_value:"#F5CAB9",colour_name:"Classic Ivory"},{hex_value:"#B37560",colour_name:"Coconut"},{hex_value:"#F3BEAC",colour_name:"Creamy Natural "},{hex_value:"#E4A890",colour_name:"Honey Beige "},{hex_value:"#F6D2BC",colour_name:"Ivory"},{hex_value:"#E2B598",colour_name:"Natural Beige"},{hex_value:"#515552",colour_name:"Audacious Asphalt "},{hex_value:"#D8BFAC",colour_name:"Barely Beige "},{hex_value:"#B89A89",colour_name:"Bronze Truffle "},{hex_value:"#706A70",colour_name:"Charcoal Chrome "},{hex_value:"#5C3B27",colour_name:"Creamy Chocolate "},{hex_value:"#DDBA89",colour_name:"Gold Rush "},{hex_value:"#8E8C86",colour_name:"Grey Crystal "},{hex_value:"#7D6F7D",colour_name:"Lavish Lavender "},{hex_value:"#957B83",colour_name:"Lilac Lust "},{hex_value:"#E5AEB9",colour_name:"Pink Parfait "},{hex_value:"#F1BEAB",colour_name:"Nude "},{hex_value:"#F8E0D4",colour_name:"Porcelain Ivory"},{hex_value:"#EEBAA4",colour_name:"Pure Beige"},{hex_value:"#EFC2A1",colour_name:"Sandy Beige "}],buildShowItem:function(){___buildShowItem(MEYER_APP)},buildcustomPrice:function(){___buildcustomPrice(MEYER_APP)},buildcustomRating:function(){___buildcustomRating()},buildcustomType:function(){___buildcustomType(MEYER_APP)},buildcustomColors:function(){___buildcustomColors(MEYER_APP)},buildPaging:function(e,a){___buildPaging(e,a,MEYER_APP)},filterData:function(e){___filterData(e,MEYER_APP)},buildSort:function(){___buildSortItem(MEYER_APP)},buildItems:function(e){___buildItems(e)},init:function(){jsonLoad(MEYER_APP.MEYER_REST_API,function(e){MEYER_APP.buildShowItem(),MEYER_APP.buildcustomPrice(),MEYER_APP.buildcustomType(),MEYER_APP.buildcustomRating(),MEYER_APP.buildcustomColors(),MEYER_APP.buildSort(),MEYER_APP.filterData(e)},function(e){console.error(e)})}};jQuery(function(){MEYER_APP.init()});